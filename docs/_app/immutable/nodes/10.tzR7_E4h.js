import{b as Et,_ as Ct}from"../chunks/1Lp4KpJE.js";import"../chunks/DsnmJJEf.js";import{o as jt}from"../chunks/CAmfxl6p.js";import{p as $t,j as y,q as st,g as u,a as Gt,o as ft,s as T,k as x,l as b,y as Ft}from"../chunks/C1ii0OAS.js";import{d as Mt,e as Nt,s as R}from"../chunks/KwNy0qmf.js";import{i as ct}from"../chunks/rnD226wj.js";import{f as it,a as nt}from"../chunks/Di5YQjFO.js";import{r as qt}from"../chunks/CyZ9agRO.js";import{b as zt}from"../chunks/D8fahtli.js";function St(a,g,f={}){const m={type:"Feature"};return(f.id===0||f.id)&&(m.id=f.id),f.bbox&&(m.bbox=f.bbox),m.properties={},m.geometry=a,m}function Bt(a,g,f={}){if(!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kt(a[0])||!kt(a[1]))throw new Error("coordinates must contain numbers");return St({type:"Point",coordinates:a},g,f)}function Ut(a,g,f={}){for(const v of a){if(v.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(v[v.length-1].length!==v[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<v[v.length-1].length;o++)if(v[v.length-1][o]!==v[0][o])throw new Error("First and last Position are not equivalent.")}return St({type:"Polygon",coordinates:a},g,f)}function kt(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Lt(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return[...a.geometry.coordinates];if(a.type==="Point")return[...a.coordinates]}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return[...a];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ot(a){return a.type==="Feature"?a.geometry:a}const X=11102230246251565e-32,F=134217729,Zt=(3+8*X)*X;function wt(a,g,f,m,v){let o,e,s,c,n=g[0],p=m[0],t=0,r=0;p>n==p>-n?(o=n,n=g[++t]):(o=p,p=m[++r]);let i=0;if(t<a&&r<f)for(p>n==p>-n?(e=n+o,s=o-(e-n),n=g[++t]):(e=p+o,s=o-(e-p),p=m[++r]),o=e,s!==0&&(v[i++]=s);t<a&&r<f;)p>n==p>-n?(e=o+n,c=e-o,s=o-(e-c)+(n-c),n=g[++t]):(e=o+p,c=e-o,s=o-(e-c)+(p-c),p=m[++r]),o=e,s!==0&&(v[i++]=s);for(;t<a;)e=o+n,c=e-o,s=o-(e-c)+(n-c),n=g[++t],o=e,s!==0&&(v[i++]=s);for(;r<f;)e=o+p,c=e-o,s=o-(e-c)+(p-c),p=m[++r],o=e,s!==0&&(v[i++]=s);return(o!==0||i===0)&&(v[i++]=o),i}function Tt(a,g){let f=g[0];for(let m=1;m<a;m++)f+=g[m];return f}function mt(a){return new Float64Array(a)}const Jt=(3+16*X)*X,Qt=(2+12*X)*X,Vt=(9+64*X)*X*X,lt=mt(4),At=mt(8),Pt=mt(12),Rt=mt(16),z=mt(4);function Yt(a,g,f,m,v,o,e){let s,c,n,p,t,r,i,w,l,_,d,k,H,P,S,I,j,D;const $=a-v,G=f-v,O=g-o,Z=m-o;P=$*Z,r=F*$,i=r-(r-$),w=$-i,r=F*Z,l=r-(r-Z),_=Z-l,S=w*_-(P-i*l-w*l-i*_),I=O*G,r=F*O,i=r-(r-O),w=O-i,r=F*G,l=r-(r-G),_=G-l,j=w*_-(I-i*l-w*l-i*_),d=S-j,t=S-d,lt[0]=S-(d+t)+(t-j),k=P+d,t=k-P,H=P-(k-t)+(d-t),d=H-I,t=H-d,lt[1]=H-(d+t)+(t-I),D=k+d,t=D-k,lt[2]=k-(D-t)+(d-t),lt[3]=D;let J=Tt(4,lt),tt=Qt*e;if(J>=tt||-J>=tt||(t=a-$,s=a-($+t)+(t-v),t=f-G,n=f-(G+t)+(t-v),t=g-O,c=g-(O+t)+(t-o),t=m-Z,p=m-(Z+t)+(t-o),s===0&&c===0&&n===0&&p===0)||(tt=Vt*e+Zt*Math.abs(J),J+=$*p+Z*s-(O*n+G*c),J>=tt||-J>=tt))return J;P=s*Z,r=F*s,i=r-(r-s),w=s-i,r=F*Z,l=r-(r-Z),_=Z-l,S=w*_-(P-i*l-w*l-i*_),I=c*G,r=F*c,i=r-(r-c),w=c-i,r=F*G,l=r-(r-G),_=G-l,j=w*_-(I-i*l-w*l-i*_),d=S-j,t=S-d,z[0]=S-(d+t)+(t-j),k=P+d,t=k-P,H=P-(k-t)+(d-t),d=H-I,t=H-d,z[1]=H-(d+t)+(t-I),D=k+d,t=D-k,z[2]=k-(D-t)+(d-t),z[3]=D;const bt=wt(4,lt,4,z,At);P=$*p,r=F*$,i=r-(r-$),w=$-i,r=F*p,l=r-(r-p),_=p-l,S=w*_-(P-i*l-w*l-i*_),I=O*n,r=F*O,i=r-(r-O),w=O-i,r=F*n,l=r-(r-n),_=n-l,j=w*_-(I-i*l-w*l-i*_),d=S-j,t=S-d,z[0]=S-(d+t)+(t-j),k=P+d,t=k-P,H=P-(k-t)+(d-t),d=H-I,t=H-d,z[1]=H-(d+t)+(t-I),D=k+d,t=D-k,z[2]=k-(D-t)+(d-t),z[3]=D;const vt=wt(bt,At,4,z,Pt);P=s*p,r=F*s,i=r-(r-s),w=s-i,r=F*p,l=r-(r-p),_=p-l,S=w*_-(P-i*l-w*l-i*_),I=c*n,r=F*c,i=r-(r-c),w=c-i,r=F*n,l=r-(r-n),_=n-l,j=w*_-(I-i*l-w*l-i*_),d=S-j,t=S-d,z[0]=S-(d+t)+(t-j),k=P+d,t=k-P,H=P-(k-t)+(d-t),d=H-I,t=H-d,z[1]=H-(d+t)+(t-I),D=k+d,t=D-k,z[2]=k-(D-t)+(d-t),z[3]=D;const ht=wt(vt,Pt,4,z,Rt);return Rt[ht-1]}function Kt(a,g,f,m,v,o){const e=(g-o)*(f-v),s=(a-v)*(m-o),c=e-s,n=Math.abs(e+s);return Math.abs(c)>=Jt*n?c:-Yt(a,g,f,m,v,o,n)}function Wt(a,g){var f,m,v=0,o,e,s,c,n,p,t,r=a[0],i=a[1],w=g.length;for(f=0;f<w;f++){m=0;var l=g[f],_=l.length-1;if(p=l[0],p[0]!==l[_][0]&&p[1]!==l[_][1])throw new Error("First and last coordinates in a ring must be the same");for(e=p[0]-r,s=p[1]-i,m;m<_;m++){if(t=l[m+1],c=t[0]-r,n=t[1]-i,s===0&&n===0){if(c<=0&&e>=0||e<=0&&c>=0)return 0}else if(n>=0&&s<=0||n<=0&&s>=0){if(o=Kt(e,c,s,n,0,0),o===0)return 0;(o>0&&n>0&&s<=0||o<0&&n<=0&&s>0)&&v++}p=t,s=n,e=c}}return v%2!==0}function Xt(a,g,f={}){if(!a)throw new Error("point is required");if(!g)throw new Error("polygon is required");const m=Lt(a),v=Ot(g),o=v.type,e=g.bbox;let s=v.coordinates;if(e&&te(m,e)===!1)return!1;o==="Polygon"&&(s=[s]);let c=!1;for(var n=0;n<s.length;++n){const p=Wt(m,s[n]);if(p===0)return!f.ignoreBoundary;p&&(c=!0)}return c}function te(a,g){return g[0]<=a[0]&&g[1]<=a[1]&&g[2]>=a[0]&&g[3]>=a[1]}var ee=it('<p class="mt-2 text-sm text-red-600 dark:text-red-400"> </p>'),re=it('<p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p>',1),ae=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Georgia State Senate</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p></div>'),oe=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Georgia State House</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p></div>'),se=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Nearby Point of Contact</h3> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p></div>'),ne=it('<div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-6 space-y-4"><div><h2 class="text-xl font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Your Location</h2> <p class="text-charcoal-700 dark:text-cream-200"> </p></div> <div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">U.S. House of Representatives</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <!></div> <!> <!> <!></div>'),ie=it('<div class="flex flex-col lg:flex-row gap-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="lg:w-1/3 space-y-6"><div><h1 class="text-4xl font-bold text-charcoal-900 dark:text-cream-100 mb-4">Who Do I Call</h1> <p class="text-charcoal-700 dark:text-cream-200">Enter your Georgia ZIP code to find your representatives and the nearest advocacy contact.</p></div> <div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-6"><label for="zipcode" class="block text-sm font-medium text-charcoal-700 dark:text-cream-200 mb-2">Enter your Georgia ZIP code</label> <div class="flex gap-2"><input type="text" id="zipcode" placeholder="e.g., 30309" maxlength="5" class="flex-1 px-4 py-2 rounded-lg border border-charcoal-300 dark:border-charcoal-600 bg-white dark:bg-charcoal-900 text-charcoal-900 dark:text-cream-100 focus:outline-none focus:ring-2 focus:ring-crimson-600"/> <button class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md"> </button></div> <!></div> <!></div> <div class="lg:w-2/3"><div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-4"><div class="w-full h-[600px] rounded-lg"></div></div></div></div>');function ge(a,g){$t(g,!0);let f=ft(""),m=ft(void 0),v=null,o=null,e=ft(null),s=ft(""),c=ft(!1),n=null,p=null,t=null,r=null,i=null,w=null,l=[];const _={30309:{lat:33.7847,lng:-84.3747,city:"Atlanta"},31419:{lat:32.0298,lng:-81.1165,city:"Savannah"},31210:{lat:32.8819,lng:-83.7102,city:"Macon"},30909:{lat:33.4404,lng:-82.0702,city:"Augusta"},31907:{lat:32.4754,lng:-84.9324,city:"Columbus"},30303:{lat:33.7545,lng:-84.3903,city:"Atlanta"},30318:{lat:33.7985,lng:-84.4255,city:"Atlanta"},30312:{lat:33.7384,lng:-84.3716,city:"Atlanta"},31401:{lat:32.0809,lng:-81.0912,city:"Savannah"},31405:{lat:32.0176,lng:-81.1287,city:"Savannah"}};jt(async()=>{o=(await Ct(async()=>{const{default:h}=await import("../chunks/2Sd0OU2W.js").then(A=>A.l);return{default:h}},[],import.meta.url)).default;try{const[h,A,E,Q,K,C]=await Promise.all([fetch("/data/representatives.json"),fetch("/data/points-of-contact.json"),fetch("/data/ga-congress.json"),fetch("/data/ga-state-senate.json"),fetch("/data/ga-state-house.json"),fetch("/data/ga-boundary.json")]);n=await h.json(),p=await A.json(),t=await E.json(),r=await Q.json(),i=await K.json(),w=await C.json()}catch(h){console.error("Error loading data:",h)}u(m)&&(v=o.map(u(m)).setView([32.6781,-83.2238],7),o.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(v))});async function d(){if(!u(f)||u(f).length!==5){T(s,"Please enter a valid 5-digit ZIP code.");return}T(c,!0),T(s,""),T(e,null);try{let h=[],A,E,Q="";try{const B=`https://nominatim.openstreetmap.org/search?postalcode=${u(f)}&country=US&state=Georgia&format=json&limit=1`;h=await(await fetch(B,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(B){console.warn("Primary geocoding failed:",B)}if(!h||h.length===0)try{const B=`https://nominatim.openstreetmap.org/search?q=${u(f)}+Georgia+USA&format=json&limit=1`;h=await(await fetch(B,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(B){console.warn("Fallback geocoding failed:",B)}if(!h||h.length===0)if(_[u(f)]){const B=_[u(f)];A=B.lat,E=B.lng,Q=B.city}else{T(s,"Could not find this ZIP code in Georgia. Please try again."),T(c,!1);return}else A=parseFloat(h[0].lat),E=parseFloat(h[0].lon),Q=h[0].display_name.split(",")[0];const K=Bt([E,A]);console.log("Looking up districts for point:",{lat:A,lng:E,point:K});const C=k(K,t),V=k(K,r),W=k(K,i);if(console.log("Found districts:",{usHouseDistrictId:C,stateSenateDistrictId:V,stateHouseDistrictId:W}),!C){T(s,"Could not determine congressional district for this ZIP code."),T(c,!1);return}const et=n.us_congress[C],dt=V?n.state_senate[V]:null,gt=W?n.state_house[W]:null,xt=p[C]?.[0];T(e,{zipCode:u(f),city:Q,lat:A,lng:E,usHouseDistrictId:C,stateSenateDistrictId:V||"N/A",stateHouseDistrictId:W||"N/A",usHouseRep:et,stateSenator:dt,stateHouseRep:gt,advocacyContact:xt},!0),H(A,E,C,V,W,xt)}catch(h){console.error("Search error:",h),T(s,"An error occurred while searching. Please try again.")}finally{T(c,!1)}}function k(h,A){if(!A||!A.features)return null;for(const E of A.features){const Q=Ut(E.geometry.coordinates);if(Xt(h,Q))return E.properties.district}return null}function H(h,A,E,Q,K,C){if(!v||!o)return;l.forEach(et=>et.remove()),l=[];const V=o.divIcon({html:'<div style="background-color: #DC2626; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[16,16],iconAnchor:[8,8]}),W=o.marker([h,A],{icon:V}).bindPopup("<strong>Your Location</strong>").addTo(v);if(l.push(W),C){const et=o.divIcon({html:'<div style="background-color: #8B2635; width: 10px; height: 10px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[14,14],iconAnchor:[7,7]}),dt=o.marker([C.lat,C.lng],{icon:et}).bindPopup(`<strong>${C.name}</strong><br/>${C.type}`).addTo(v);l.push(dt)}v.flyTo([h,A],13)}function P(h){h.key==="Enter"&&d()}var S=ie(),I=x(S),j=y(x(I),2),D=y(x(j),2),$=x(D);qt($);var G=y($,2);G.__click=d;var O=x(G,!0);b(G),b(D);var Z=y(D,2);{var J=h=>{var A=ee(),E=x(A,!0);b(A),st(()=>R(E,u(s))),nt(h,A)};ct(Z,h=>{u(s)&&h(J)})}b(j);var tt=y(j,2);{var bt=h=>{var A=ne(),E=x(A),Q=y(x(E),2),K=x(Q);b(Q),b(E);var C=y(E,2),V=y(x(C),2),W=x(V);b(V);var et=y(V,2);{var dt=M=>{var U=re(),N=Ft(U),rt=x(N);b(N);var q=y(N,2),at=x(q,!0);b(q);var L=y(q,2),ot=x(L,!0);b(L);var Y=y(L,2),ut=x(Y,!0);b(Y),st(()=>{R(rt,`${u(e).usHouseRep.name??""} (${u(e).usHouseRep.party??""})`),R(at,u(e).usHouseRep.phone),R(ot,u(e).usHouseRep.email),R(ut,u(e).usHouseRep.office_address)}),nt(M,U)};ct(et,M=>{u(e).usHouseRep&&M(dt)})}b(C);var gt=y(C,2);{var xt=M=>{var U=ae(),N=y(x(U),2),rt=x(N);b(N);var q=y(N,2),at=x(q);b(q);var L=y(q,2),ot=x(L,!0);b(L);var Y=y(L,2),ut=x(Y,!0);b(Y);var pt=y(Y,2),yt=x(pt,!0);b(pt),b(U),st(()=>{R(rt,`District: ${u(e).stateSenateDistrictId??""}`),R(at,`${u(e).stateSenator.name??""} (${u(e).stateSenator.party??""})`),R(ot,u(e).stateSenator.phone),R(ut,u(e).stateSenator.email),R(yt,u(e).stateSenator.office_address)}),nt(M,U)};ct(gt,M=>{u(e).stateSenator&&M(xt)})}var B=y(gt,2);{var _t=M=>{var U=oe(),N=y(x(U),2),rt=x(N);b(N);var q=y(N,2),at=x(q);b(q);var L=y(q,2),ot=x(L,!0);b(L);var Y=y(L,2),ut=x(Y,!0);b(Y);var pt=y(Y,2),yt=x(pt,!0);b(pt),b(U),st(()=>{R(rt,`District: ${u(e).stateHouseDistrictId??""}`),R(at,`${u(e).stateHouseRep.name??""} (${u(e).stateHouseRep.party??""})`),R(ot,u(e).stateHouseRep.phone),R(ut,u(e).stateHouseRep.email),R(yt,u(e).stateHouseRep.office_address)}),nt(M,U)};ct(B,M=>{u(e).stateHouseRep&&M(_t)})}var Dt=y(B,2);{var Ht=M=>{var U=se(),N=y(x(U),2),rt=x(N,!0);b(N);var q=y(N,2),at=x(q,!0);b(q);var L=y(q,2),ot=x(L,!0);b(L),b(U),st(()=>{R(rt,u(e).advocacyContact.name),R(at,u(e).advocacyContact.type),R(ot,u(e).advocacyContact.address)}),nt(M,U)};ct(Dt,M=>{u(e).advocacyContact&&M(Ht)})}b(A),st(()=>{R(K,`${u(e).city??""}, GA ${u(e).zipCode??""}`),R(W,`District: ${u(e).usHouseDistrictId??""}`)}),nt(h,A)};ct(tt,h=>{u(e)&&h(bt)})}b(I);var vt=y(I,2),ht=x(vt),It=x(ht);Et(It,h=>T(m,h),()=>u(m)),b(ht),b(vt),b(S),st(()=>{G.disabled=u(c),R(O,u(c)?"Searching...":"Find")}),Nt("keypress",$,P),zt($,()=>u(f),h=>T(f,h)),nt(a,S),Gt()}Mt(["click"]);export{ge as component};
