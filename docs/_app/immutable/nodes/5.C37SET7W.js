import{b as jt,_ as Gt}from"../chunks/BjDpoNx0.js";import{f as it,a as st}from"../chunks/DtWRs5Cq.js";import{o as Ft}from"../chunks/A7sQcLub.js";import{aU as Mt,aS as Nt,o as zt,A as Bt,p as Ut,B as vt,aV as qt,ad as Lt,a as y,b as nt,g as v,ae as Ot,h as pt,s as T,c as x,r as b,f as Zt}from"../chunks/DJ2Boix_.js";import{d as Tt,e as Vt,s as P}from"../chunks/Chk-kckB.js";import{i as lt}from"../chunks/BFaMWwCj.js";import{r as Jt}from"../chunks/D8458Aw8.js";function Qt(t,p,d=p){var m=new WeakSet;Mt(t,"input",async c=>{var a=c?t.defaultValue:t.value;if(a=kt(t)?At(a):a,d(a),vt!==null&&m.add(vt),await Nt(),a!==(a=p())){var r=t.selectionStart,s=t.selectionEnd,i=t.value.length;if(t.value=a??"",s!==null){var n=t.value.length;r===s&&s===i&&n>i?(t.selectionStart=n,t.selectionEnd=n):(t.selectionStart=r,t.selectionEnd=Math.min(s,n))}}}),(Ut&&t.defaultValue!==t.value||zt(p)==null&&t.value)&&(d(kt(t)?At(t.value):t.value),vt!==null&&m.add(vt)),Bt(()=>{var c=p();if(t===document.activeElement){var a=qt??vt;if(m.has(a))return}kt(t)&&c===At(t.value)||t.type==="date"&&!c&&!t.value||c!==t.value&&(t.value=c??"")})}function kt(t){var p=t.type;return p==="number"||p==="range"}function At(t){return t===""?null:+t}function Dt(t,p,d={}){const m={type:"Feature"};return(d.id===0||d.id)&&(m.id=d.id),d.bbox&&(m.bbox=d.bbox),m.properties={},m.geometry=t,m}function Wt(t,p,d={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Pt(t[0])||!Pt(t[1]))throw new Error("coordinates must contain numbers");return Dt({type:"Point",coordinates:t},p,d)}function Yt(t,p,d={}){for(const c of t){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<c[c.length-1].length;a++)if(c[c.length-1][a]!==c[0][a])throw new Error("First and last Position are not equivalent.")}return Dt({type:"Polygon",coordinates:t},p,d)}function Pt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Kt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Xt(t){return t.type==="Feature"?t.geometry:t}const X=11102230246251565e-32,F=134217729,te=(3+8*X)*X;function St(t,p,d,m,c){let a,r,s,i,n=p[0],h=m[0],e=0,o=0;h>n==h>-n?(a=n,n=p[++e]):(a=h,h=m[++o]);let l=0;if(e<t&&o<d)for(h>n==h>-n?(r=n+a,s=a-(r-n),n=p[++e]):(r=h+a,s=a-(r-h),h=m[++o]),a=r,s!==0&&(c[l++]=s);e<t&&o<d;)h>n==h>-n?(r=a+n,i=r-a,s=a-(r-i)+(n-i),n=p[++e]):(r=a+h,i=r-a,s=a-(r-i)+(h-i),h=m[++o]),a=r,s!==0&&(c[l++]=s);for(;e<t;)r=a+n,i=r-a,s=a-(r-i)+(n-i),n=p[++e],a=r,s!==0&&(c[l++]=s);for(;o<d;)r=a+h,i=r-a,s=a-(r-i)+(h-i),h=m[++o],a=r,s!==0&&(c[l++]=s);return(a!==0||l===0)&&(c[l++]=a),l}function ee(t,p){let d=p[0];for(let m=1;m<t;m++)d+=p[m];return d}function mt(t){return new Float64Array(t)}const re=(3+16*X)*X,ae=(2+12*X)*X,oe=(9+64*X)*X*X,ct=mt(4),Rt=mt(8),Et=mt(12),It=mt(16),B=mt(4);function se(t,p,d,m,c,a,r){let s,i,n,h,e,o,l,w,u,_,f,k,D,S,R,E,$,I;const j=t-c,G=d-c,O=p-a,Z=m-a;S=j*Z,o=F*j,l=o-(o-j),w=j-l,o=F*Z,u=o-(o-Z),_=Z-u,R=w*_-(S-l*u-w*u-l*_),E=O*G,o=F*O,l=o-(o-O),w=O-l,o=F*G,u=o-(o-G),_=G-u,$=w*_-(E-l*u-w*u-l*_),f=R-$,e=R-f,ct[0]=R-(f+e)+(e-$),k=S+f,e=k-S,D=S-(k-e)+(f-e),f=D-E,e=D-f,ct[1]=D-(f+e)+(e-E),I=k+f,e=I-k,ct[2]=k-(I-e)+(f-e),ct[3]=I;let V=ee(4,ct),tt=ae*r;if(V>=tt||-V>=tt||(e=t-j,s=t-(j+e)+(e-c),e=d-G,n=d-(G+e)+(e-c),e=p-O,i=p-(O+e)+(e-a),e=m-Z,h=m-(Z+e)+(e-a),s===0&&i===0&&n===0&&h===0)||(tt=oe*r+te*Math.abs(V),V+=j*h+Z*s-(O*n+G*i),V>=tt||-V>=tt))return V;S=s*Z,o=F*s,l=o-(o-s),w=s-l,o=F*Z,u=o-(o-Z),_=Z-u,R=w*_-(S-l*u-w*u-l*_),E=i*G,o=F*i,l=o-(o-i),w=i-l,o=F*G,u=o-(o-G),_=G-u,$=w*_-(E-l*u-w*u-l*_),f=R-$,e=R-f,B[0]=R-(f+e)+(e-$),k=S+f,e=k-S,D=S-(k-e)+(f-e),f=D-E,e=D-f,B[1]=D-(f+e)+(e-E),I=k+f,e=I-k,B[2]=k-(I-e)+(f-e),B[3]=I;const _t=St(4,ct,4,B,Rt);S=j*h,o=F*j,l=o-(o-j),w=j-l,o=F*h,u=o-(o-h),_=h-u,R=w*_-(S-l*u-w*u-l*_),E=O*n,o=F*O,l=o-(o-O),w=O-l,o=F*n,u=o-(o-n),_=n-u,$=w*_-(E-l*u-w*u-l*_),f=R-$,e=R-f,B[0]=R-(f+e)+(e-$),k=S+f,e=k-S,D=S-(k-e)+(f-e),f=D-E,e=D-f,B[1]=D-(f+e)+(e-E),I=k+f,e=I-k,B[2]=k-(I-e)+(f-e),B[3]=I;const ht=St(_t,Rt,4,B,Et);S=s*h,o=F*s,l=o-(o-s),w=s-l,o=F*h,u=o-(o-h),_=h-u,R=w*_-(S-l*u-w*u-l*_),E=i*n,o=F*i,l=o-(o-i),w=i-l,o=F*n,u=o-(o-n),_=n-u,$=w*_-(E-l*u-w*u-l*_),f=R-$,e=R-f,B[0]=R-(f+e)+(e-$),k=S+f,e=k-S,D=S-(k-e)+(f-e),f=D-E,e=D-f,B[1]=D-(f+e)+(e-E),I=k+f,e=I-k,B[2]=k-(I-e)+(f-e),B[3]=I;const gt=St(ht,Et,4,B,It);return It[gt-1]}function ne(t,p,d,m,c,a){const r=(p-a)*(d-c),s=(t-c)*(m-a),i=r-s,n=Math.abs(r+s);return Math.abs(i)>=re*n?i:-se(t,p,d,m,c,a,n)}function ie(t,p){var d,m,c=0,a,r,s,i,n,h,e,o=t[0],l=t[1],w=p.length;for(d=0;d<w;d++){m=0;var u=p[d],_=u.length-1;if(h=u[0],h[0]!==u[_][0]&&h[1]!==u[_][1])throw new Error("First and last coordinates in a ring must be the same");for(r=h[0]-o,s=h[1]-l,m;m<_;m++){if(e=u[m+1],i=e[0]-o,n=e[1]-l,s===0&&n===0){if(i<=0&&r>=0||r<=0&&i>=0)return 0}else if(n>=0&&s<=0||n<=0&&s>=0){if(a=ne(r,i,s,n,0,0),a===0)return 0;(a>0&&n>0&&s<=0||a<0&&n<=0&&s>0)&&c++}h=e,s=n,r=i}}return c%2!==0}function le(t,p,d={}){if(!t)throw new Error("point is required");if(!p)throw new Error("polygon is required");const m=Kt(t),c=Xt(p),a=c.type,r=p.bbox;let s=c.coordinates;if(r&&ce(m,r)===!1)return!1;a==="Polygon"&&(s=[s]);let i=!1;for(var n=0;n<s.length;++n){const h=ie(m,s[n]);if(h===0)return!d.ignoreBoundary;h&&(i=!0)}return i}function ce(t,p){return p[0]<=t[0]&&p[1]<=t[1]&&p[2]>=t[0]&&p[3]>=t[1]}var de=it('<p class="mt-2 text-sm text-red-600 dark:text-red-400"> </p>'),ue=it('<p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p>',1),fe=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Georgia State Senate</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p></div>'),ve=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Georgia State House</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-xs text-charcoal-600 dark:text-cream-300 mt-1"> </p></div>'),pe=it('<div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Nearby Point of Contact</h3> <p class="font-medium text-charcoal-900 dark:text-cream-100"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p> <p class="text-sm text-charcoal-700 dark:text-cream-200"> </p></div>'),me=it('<div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-6 space-y-4"><div><h2 class="text-xl font-semibold text-crimson-700 dark:text-crimson-500 mb-2">Your Location</h2> <p class="text-charcoal-700 dark:text-cream-200"> </p></div> <div class="border-t border-charcoal-200 dark:border-charcoal-700 pt-4"><h3 class="text-lg font-semibold text-crimson-700 dark:text-crimson-500 mb-2">U.S. House of Representatives</h3> <p class="text-sm text-charcoal-600 dark:text-cream-300 mb-1"> </p> <!></div> <!> <!> <!></div>'),he=it('<div class="flex flex-col lg:flex-row gap-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="lg:w-1/3 space-y-6"><div><h1 class="text-4xl font-bold text-charcoal-900 dark:text-cream-100 mb-4">Who Do I Call</h1> <p class="text-charcoal-700 dark:text-cream-200">Enter your Georgia ZIP code to find your representatives and the nearest advocacy contact.</p></div> <div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-6"><label for="zipcode" class="block text-sm font-medium text-charcoal-700 dark:text-cream-200 mb-2">Enter your Georgia ZIP code</label> <div class="flex gap-2"><input type="text" id="zipcode" placeholder="e.g., 30309" maxlength="5" class="flex-1 px-4 py-2 rounded-lg border border-charcoal-300 dark:border-charcoal-600 bg-white dark:bg-charcoal-900 text-charcoal-900 dark:text-cream-100 focus:outline-none focus:ring-2 focus:ring-crimson-600"/> <button class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md"> </button></div> <!></div> <!></div> <div class="lg:w-2/3"><div class="bg-cream-50 dark:bg-charcoal-800 rounded-lg shadow-lg p-4"><div class="w-full h-[600px] rounded-lg"></div></div></div></div>');function Ae(t,p){Lt(p,!0);let d=pt(""),m=pt(void 0),c=null,a=null,r=pt(null),s=pt(""),i=pt(!1),n=null,h=null,e=null,o=null,l=null,w=null,u=[];const _={30309:{lat:33.7847,lng:-84.3747,city:"Atlanta"},31419:{lat:32.0298,lng:-81.1165,city:"Savannah"},31210:{lat:32.8819,lng:-83.7102,city:"Macon"},30909:{lat:33.4404,lng:-82.0702,city:"Augusta"},31907:{lat:32.4754,lng:-84.9324,city:"Columbus"},30303:{lat:33.7545,lng:-84.3903,city:"Atlanta"},30318:{lat:33.7985,lng:-84.4255,city:"Atlanta"},30312:{lat:33.7384,lng:-84.3716,city:"Atlanta"},31401:{lat:32.0809,lng:-81.0912,city:"Savannah"},31405:{lat:32.0176,lng:-81.1287,city:"Savannah"}};Ft(async()=>{a=(await Gt(async()=>{const{default:g}=await import("../chunks/2Sd0OU2W.js").then(A=>A.l);return{default:g}},[],import.meta.url)).default;try{const[g,A,H,J,Y,C]=await Promise.all([fetch("/data/representatives.json"),fetch("/data/points-of-contact.json"),fetch("/data/ga-congress.json"),fetch("/data/ga-state-senate.json"),fetch("/data/ga-state-house.json"),fetch("/data/ga-boundary.json")]);n=await g.json(),h=await A.json(),e=await H.json(),o=await J.json(),l=await Y.json(),w=await C.json()}catch(g){console.error("Error loading data:",g)}v(m)&&(c=a.map(v(m)).setView([32.6781,-83.2238],7),a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c))});async function f(){if(!v(d)||v(d).length!==5){T(s,"Please enter a valid 5-digit ZIP code.");return}T(i,!0),T(s,""),T(r,null);try{let g=[],A,H,J="";try{const U=`https://nominatim.openstreetmap.org/search?postalcode=${v(d)}&country=US&state=Georgia&format=json&limit=1`;g=await(await fetch(U,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(U){console.warn("Primary geocoding failed:",U)}if(!g||g.length===0)try{const U=`https://nominatim.openstreetmap.org/search?q=${v(d)}+Georgia+USA&format=json&limit=1`;g=await(await fetch(U,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(U){console.warn("Fallback geocoding failed:",U)}if(!g||g.length===0)if(_[v(d)]){const U=_[v(d)];A=U.lat,H=U.lng,J=U.city}else{T(s,"Could not find this ZIP code in Georgia. Please try again."),T(i,!1);return}else A=parseFloat(g[0].lat),H=parseFloat(g[0].lon),J=g[0].display_name.split(",")[0];const Y=Wt([H,A]);console.log("Looking up districts for point:",{lat:A,lng:H,point:Y});const C=k(Y,e),Q=k(Y,o),K=k(Y,l);if(console.log("Found districts:",{usHouseDistrictId:C,stateSenateDistrictId:Q,stateHouseDistrictId:K}),!C){T(s,"Could not determine congressional district for this ZIP code."),T(i,!1);return}const et=n.us_congress[C],dt=Q?n.state_senate[Q]:null,xt=K?n.state_house[K]:null,bt=h[C]?.[0];T(r,{zipCode:v(d),city:J,lat:A,lng:H,usHouseDistrictId:C,stateSenateDistrictId:Q||"N/A",stateHouseDistrictId:K||"N/A",usHouseRep:et,stateSenator:dt,stateHouseRep:xt,advocacyContact:bt},!0),D(A,H,C,Q,K,bt)}catch(g){console.error("Search error:",g),T(s,"An error occurred while searching. Please try again.")}finally{T(i,!1)}}function k(g,A){if(!A||!A.features)return null;for(const H of A.features){const J=Yt(H.geometry.coordinates);if(le(g,J))return H.properties.district}return null}function D(g,A,H,J,Y,C){if(!c||!a)return;u.forEach(et=>et.remove()),u=[];const Q=a.divIcon({html:'<div style="background-color: #DC2626; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[16,16],iconAnchor:[8,8]}),K=a.marker([g,A],{icon:Q}).bindPopup("<strong>Your Location</strong>").addTo(c);if(u.push(K),C){const et=a.divIcon({html:'<div style="background-color: #8B2635; width: 10px; height: 10px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[14,14],iconAnchor:[7,7]}),dt=a.marker([C.lat,C.lng],{icon:et}).bindPopup(`<strong>${C.name}</strong><br/>${C.type}`).addTo(c);u.push(dt)}c.flyTo([g,A],13)}function S(g){g.key==="Enter"&&f()}var R=he(),E=x(R),$=y(x(E),2),I=y(x($),2),j=x(I);Jt(j);var G=y(j,2);G.__click=f;var O=x(G,!0);b(G),b(I);var Z=y(I,2);{var V=g=>{var A=de(),H=x(A,!0);b(A),nt(()=>P(H,v(s))),st(g,A)};lt(Z,g=>{v(s)&&g(V)})}b($);var tt=y($,2);{var _t=g=>{var A=me(),H=x(A),J=y(x(H),2),Y=x(J);b(J),b(H);var C=y(H,2),Q=y(x(C),2),K=x(Q);b(Q);var et=y(Q,2);{var dt=M=>{var q=ue(),N=Zt(q),rt=x(N);b(N);var z=y(N,2),at=x(z,!0);b(z);var L=y(z,2),ot=x(L,!0);b(L);var W=y(L,2),ut=x(W,!0);b(W),nt(()=>{P(rt,`${v(r).usHouseRep.name??""} (${v(r).usHouseRep.party??""})`),P(at,v(r).usHouseRep.phone),P(ot,v(r).usHouseRep.email),P(ut,v(r).usHouseRep.office_address)}),st(M,q)};lt(et,M=>{v(r).usHouseRep&&M(dt)})}b(C);var xt=y(C,2);{var bt=M=>{var q=fe(),N=y(x(q),2),rt=x(N);b(N);var z=y(N,2),at=x(z);b(z);var L=y(z,2),ot=x(L,!0);b(L);var W=y(L,2),ut=x(W,!0);b(W);var ft=y(W,2),wt=x(ft,!0);b(ft),b(q),nt(()=>{P(rt,`District: ${v(r).stateSenateDistrictId??""}`),P(at,`${v(r).stateSenator.name??""} (${v(r).stateSenator.party??""})`),P(ot,v(r).stateSenator.phone),P(ut,v(r).stateSenator.email),P(wt,v(r).stateSenator.office_address)}),st(M,q)};lt(xt,M=>{v(r).stateSenator&&M(bt)})}var U=y(xt,2);{var yt=M=>{var q=ve(),N=y(x(q),2),rt=x(N);b(N);var z=y(N,2),at=x(z);b(z);var L=y(z,2),ot=x(L,!0);b(L);var W=y(L,2),ut=x(W,!0);b(W);var ft=y(W,2),wt=x(ft,!0);b(ft),b(q),nt(()=>{P(rt,`District: ${v(r).stateHouseDistrictId??""}`),P(at,`${v(r).stateHouseRep.name??""} (${v(r).stateHouseRep.party??""})`),P(ot,v(r).stateHouseRep.phone),P(ut,v(r).stateHouseRep.email),P(wt,v(r).stateHouseRep.office_address)}),st(M,q)};lt(U,M=>{v(r).stateHouseRep&&M(yt)})}var Ct=y(U,2);{var $t=M=>{var q=pe(),N=y(x(q),2),rt=x(N,!0);b(N);var z=y(N,2),at=x(z,!0);b(z);var L=y(z,2),ot=x(L,!0);b(L),b(q),nt(()=>{P(rt,v(r).advocacyContact.name),P(at,v(r).advocacyContact.type),P(ot,v(r).advocacyContact.address)}),st(M,q)};lt(Ct,M=>{v(r).advocacyContact&&M($t)})}b(A),nt(()=>{P(Y,`${v(r).city??""}, GA ${v(r).zipCode??""}`),P(K,`District: ${v(r).usHouseDistrictId??""}`)}),st(g,A)};lt(tt,g=>{v(r)&&g(_t)})}b(E);var ht=y(E,2),gt=x(ht),Ht=x(gt);jt(Ht,g=>T(m,g),()=>v(m)),b(gt),b(ht),b(R),nt(()=>{G.disabled=v(i),P(O,v(i)?"Searching...":"Find")}),Vt("keypress",j,S),Qt(j,()=>v(d),g=>T(d,g)),st(t,R),Ot()}Tt(["click"]);export{Ae as component};
