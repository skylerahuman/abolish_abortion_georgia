import{_ as ze}from"../chunks/PPVm8Dsz.js";import{a as te,f as oe}from"../chunks/DCeAnCOA.js";import{o as qe}from"../chunks/yTdhJhOv.js";import{p as Oe,t as re,g as b,a as Ue,c as y,s as z,b as S,d as ue,r as x,n as Ze}from"../chunks/DUqkvchf.js";import{s as O}from"../chunks/CiBowwPs.js";import{i as ve}from"../chunks/Bx_CbX2K.js";import{e as Ae,i as Pe}from"../chunks/Dzw0jrKg.js";import{r as Ke}from"../chunks/Bk_gT_jh.js";import{s as Se}from"../chunks/CMQY6tXP.js";import{d as Qe,e as Ve,a as Ye}from"../chunks/CwfO5Cyj.js";import{b as We}from"../chunks/DMeourC9.js";import{b as et}from"../chunks/BZfWETLR.js";function Le(e,h,s={}){const p={type:"Feature"};return(s.id===0||s.id)&&(p.id=s.id),s.bbox&&(p.bbox=s.bbox),p.properties={},p.geometry=e,p}function tt(e,h,s={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ee(e[0])||!Ee(e[1]))throw new Error("coordinates must contain numbers");return Le({type:"Point",coordinates:e},h,s)}function rt(e,h,s={}){for(const g of e){if(g.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(g[g.length-1].length!==g[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<g[g.length-1].length;a++)if(g[g.length-1][a]!==g[0][a])throw new Error("First and last Position are not equivalent.")}return Le({type:"Polygon",coordinates:e},h,s)}function Ee(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function at(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(e){return e.type==="Feature"?e.geometry:e}const Q=11102230246251565e-32,$=134217729,nt=(3+8*Q)*Q;function xe(e,h,s,p,g){let a,i,o,d,n=h[0],f=p[0],t=0,r=0;f>n==f>-n?(a=n,n=h[++t]):(a=f,f=p[++r]);let l=0;if(t<e&&r<s)for(f>n==f>-n?(i=n+a,o=a-(i-n),n=h[++t]):(i=f+a,o=a-(i-f),f=p[++r]),a=i,o!==0&&(g[l++]=o);t<e&&r<s;)f>n==f>-n?(i=a+n,d=i-a,o=a-(i-d)+(n-d),n=h[++t]):(i=a+f,d=i-a,o=a-(i-d)+(f-d),f=p[++r]),a=i,o!==0&&(g[l++]=o);for(;t<e;)i=a+n,d=i-a,o=a-(i-d)+(n-d),n=h[++t],a=i,o!==0&&(g[l++]=o);for(;r<s;)i=a+f,d=i-a,o=a-(i-d)+(f-d),f=p[++r],a=i,o!==0&&(g[l++]=o);return(a!==0||l===0)&&(g[l++]=a),l}function st(e,h){let s=h[0];for(let p=1;p<e;p++)s+=h[p];return s}function pe(e){return new Float64Array(e)}const it=(3+16*Q)*Q,lt=(2+12*Q)*Q,ct=(9+64*Q)*Q*Q,se=pe(4),Me=pe(8),Ie=pe(12),De=pe(16),H=pe(4);function dt(e,h,s,p,g,a,i){let o,d,n,f,t,r,l,w,u,m,v,_,E,k,I,D,G,M;const B=e-g,F=s-g,X=h-a,N=p-a;k=B*N,r=$*B,l=r-(r-B),w=B-l,r=$*N,u=r-(r-N),m=N-u,I=w*m-(k-l*u-w*u-l*m),D=X*F,r=$*X,l=r-(r-X),w=X-l,r=$*F,u=r-(r-F),m=F-u,G=w*m-(D-l*u-w*u-l*m),v=I-G,t=I-v,se[0]=I-(v+t)+(t-G),_=k+v,t=_-k,E=k-(_-t)+(v-t),v=E-D,t=E-v,se[1]=E-(v+t)+(t-D),M=_+v,t=M-_,se[2]=_-(M-t)+(v-t),se[3]=M;let T=st(4,se),Y=lt*i;if(T>=Y||-T>=Y||(t=e-B,o=e-(B+t)+(t-g),t=s-F,n=s-(F+t)+(t-g),t=h-X,d=h-(X+t)+(t-a),t=p-N,f=p-(N+t)+(t-a),o===0&&d===0&&n===0&&f===0)||(Y=ct*i+nt*Math.abs(T),T+=B*f+N*o-(X*n+F*d),T>=Y||-T>=Y))return T;k=o*N,r=$*o,l=r-(r-o),w=o-l,r=$*N,u=r-(r-N),m=N-u,I=w*m-(k-l*u-w*u-l*m),D=d*F,r=$*d,l=r-(r-d),w=d-l,r=$*F,u=r-(r-F),m=F-u,G=w*m-(D-l*u-w*u-l*m),v=I-G,t=I-v,H[0]=I-(v+t)+(t-G),_=k+v,t=_-k,E=k-(_-t)+(v-t),v=E-D,t=E-v,H[1]=E-(v+t)+(t-D),M=_+v,t=M-_,H[2]=_-(M-t)+(v-t),H[3]=M;const he=xe(4,se,4,H,Me);k=B*f,r=$*B,l=r-(r-B),w=B-l,r=$*f,u=r-(r-f),m=f-u,I=w*m-(k-l*u-w*u-l*m),D=X*n,r=$*X,l=r-(r-X),w=X-l,r=$*n,u=r-(r-n),m=n-u,G=w*m-(D-l*u-w*u-l*m),v=I-G,t=I-v,H[0]=I-(v+t)+(t-G),_=k+v,t=_-k,E=k-(_-t)+(v-t),v=E-D,t=E-v,H[1]=E-(v+t)+(t-D),M=_+v,t=M-_,H[2]=_-(M-t)+(v-t),H[3]=M;const ge=xe(he,Me,4,H,Ie);k=o*f,r=$*o,l=r-(r-o),w=o-l,r=$*f,u=r-(r-f),m=f-u,I=w*m-(k-l*u-w*u-l*m),D=d*n,r=$*d,l=r-(r-d),w=d-l,r=$*n,u=r-(r-n),m=n-u,G=w*m-(D-l*u-w*u-l*m),v=I-G,t=I-v,H[0]=I-(v+t)+(t-G),_=k+v,t=_-k,E=k-(_-t)+(v-t),v=E-D,t=E-v,H[1]=E-(v+t)+(t-D),M=_+v,t=M-_,H[2]=_-(M-t)+(v-t),H[3]=M;const be=xe(ge,Ie,4,H,De);return De[be-1]}function ut(e,h,s,p,g,a){const i=(h-a)*(s-g),o=(e-g)*(p-a),d=i-o,n=Math.abs(i+o);return Math.abs(d)>=it*n?d:-dt(e,h,s,p,g,a,n)}function pt(e,h){var s,p,g=0,a,i,o,d,n,f,t,r=e[0],l=e[1],w=h.length;for(s=0;s<w;s++){p=0;var u=h[s],m=u.length-1;if(f=u[0],f[0]!==u[m][0]&&f[1]!==u[m][1])throw new Error("First and last coordinates in a ring must be the same");for(i=f[0]-r,o=f[1]-l,p;p<m;p++){if(t=u[p+1],d=t[0]-r,n=t[1]-l,o===0&&n===0){if(d<=0&&i>=0||i<=0&&d>=0)return 0}else if(n>=0&&o<=0||n<=0&&o>=0){if(a=ut(i,d,o,n,0,0),a===0)return 0;(a>0&&n>0&&o<=0||a<0&&n<=0&&o>0)&&g++}f=t,o=n,i=d}}return g%2!==0}function ft(e,h,s={}){if(!e)throw new Error("point is required");if(!h)throw new Error("polygon is required");const p=at(e),g=ot(h),a=g.type,i=h.bbox;let o=g.coordinates;if(i&&vt(p,i)===!1)return!1;a==="Polygon"&&(o=[o]);let d=!1;for(var n=0;n<o.length;++n){const f=pt(p,o[n]);if(f===0)return!s.ignoreBoundary;f&&(d=!0)}return d}function vt(e,h){return h[0]<=e[0]&&h[1]<=e[1]&&h[2]>=e[0]&&h[3]>=e[1]}const P=(e,h,s,p="undecided")=>({id:e.toLowerCase().replace(/ /g,"-"),name:e,chamber:"house",district:h,party:s,stance:p,roles:[],committees:[]}),je=(e,h,s,p="undecided")=>({id:e.toLowerCase().replace(/ /g,"-"),name:e,chamber:"senate",district:h,party:s,stance:p,roles:[],committees:[]}),Ge=[{...P("Jon Burns","159","R","target"),roles:[{title:"Speaker of the House",priority:1}]},{...je("Burt Jones","LtGov","R","target"),roles:[{title:"Lieutenant Governor",priority:1}]}],ht=[P("Emory Dunahoo","31","R","sponsor"),P("Mike Cameron","1","R","sponsor"),P("Charlice Byrd","20","R","sponsor"),P("Danny Mathis","149","R","sponsor"),P("Trey Kelley","16","R","sponsor"),P("Martin Momtahan","17","R","sponsor")],gt=[{...P("Tyler Paul Smith","18","R","target"),roles:[{title:"Committee Chair",priority:1}]},{...P("Deborah Silcox","53","R","target"),roles:[{title:"Vice Chair",priority:2}]},{...P("Soo Hong","103","R","target"),roles:[{title:"Secretary",priority:2}]},P("Mandi Ballinger","23","R","target"),P("Sharon Cooper","45","R","target"),P("Clint Crowe","118","R","target"),P("Chuck Efstration","104","R","target"),P("Joseph Gullett","19","R","target"),P("Stan Gunter","8","R","target"),P("Matt Holly","XXX","R","target"),P("Lane Kendrick","XXX","D","opposed"),P("Rob Leverett","123","R","target"),P("Representative Neal","XXX","D","opposed"),P("Esther Panitch","51","D","opposed"),P("Representative Roberts","XXX","D","opposed")],bt=[{...je("Brian Strickland","17","R","target"),roles:[{title:"Committee Chair",priority:1}]}],mt=[...Ge,...ht,...gt,...bt],ae={};mt.forEach(e=>{ae[e.id]?(ae[e.id].roles.push(...e.roles),e.stance==="sponsor"&&(ae[e.id].stance="sponsor")):ae[e.id]=e});function yt(e){const h=e.toLowerCase().replace(/ /g,"-");return ae[h]?ae[h]:Object.values(ae).find(s=>s.name.toLowerCase()===e.toLowerCase())}var xt=oe('<p class="mt-2 text-sm text-red-500"> </p>'),wt=oe('<span class="inline-block bg-neutral-800 text-neutral-400 text-[10px] uppercase font-bold px-2 py-0.5 rounded mb-1 mr-1"> </span>'),_t=oe('<div class="mt-4 space-y-1 text-sm text-neutral-400"><p class="flex items-center gap-2"><span class="text-neutral-600">Tel:</span> </p> <p class="flex items-center gap-2"><span class="text-neutral-600">Mail:</span> </p></div>'),Rt=oe('<div><div class="p-5"><div class="flex justify-between items-start mb-2"><div><!> <h4 class="text-xl font-bold text-white"> </h4> <p class="text-sm text-neutral-500"> </p></div> <span> </span></div> <!> <div class="mt-4 pt-4 border-t border-neutral-800 flex gap-2"><button class="flex-1 bg-white hover:bg-neutral-200 text-black py-2 rounded text-xs font-bold uppercase tracking-widest transition-colors">Call Script</button> <button class="flex-1 border border-neutral-600 hover:bg-neutral-800 text-white py-2 rounded text-xs font-bold uppercase tracking-widest transition-colors">Email</button></div></div></div>'),kt=oe('<div class="bg-neutral-900/50 rounded border border-neutral-800 p-6"><h3 class="text-sm font-bold text-red-500 uppercase tracking-widest mb-2">Local Ally</h3> <p class="font-bold text-white text-lg"> </p> <p class="text-sm text-neutral-400"> </p> <p class="text-sm text-neutral-400 mt-1"> </p></div>'),Ct=oe('<div class="space-y-6 animate-fade-in"><div class="bg-neutral-900 border border-neutral-800 p-4 rounded flex justify-between items-center"><div><h2 class="text-xs uppercase tracking-widest text-neutral-500 font-bold">Jurisdiction</h2> <p class="font-bold text-lg text-white"> </p></div></div> <div class="space-y-4"><h3 class="text-lg font-bold text-white border-b border-neutral-800 pb-2 uppercase tracking-wide">Priority Targets</h3> <!></div> <!></div>'),At=oe('<div class="bg-black text-white min-h-screen py-12 font-sans selection:bg-red-900 selection:text-white"><div class="flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="lg:w-1/3 space-y-8"><div><h1 class="text-4xl font-black text-white mb-2 uppercase tracking-tight">The Plea</h1> <div class="h-1 w-20 bg-red-600 mb-4"></div> <p class="text-neutral-400">Address the Magistrate. Enter your Georgia ZIP code to identify those who carry the sword in your district.</p></div> <div class="bg-neutral-900/50 rounded-lg border border-neutral-800 p-6"><label for="zipcode" class="block text-sm font-bold text-neutral-300 mb-2 uppercase tracking-wide">Enter ZIP Code</label> <div class="flex gap-2"><input type="text" id="zipcode" placeholder="e.g., 30309" maxlength="5" class="flex-1 px-4 py-3 rounded bg-neutral-950 border border-neutral-700 text-white focus:outline-none focus:border-red-600 focus:ring-1 focus:ring-red-600 transition-colors placeholder-neutral-700"/> <button class="px-6 py-3 bg-red-700 hover:bg-red-800 text-white font-bold rounded uppercase tracking-wider transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div> <!></div> <!></div> <div class="lg:w-2/3"><div class="bg-neutral-900 rounded-lg border border-neutral-800 p-2 sticky top-24 shadow-2xl"><div class="w-full h-[600px] rounded bg-neutral-950"></div></div></div></div></div>');function Ft(e,h){Oe(h,!0);let s=ue(""),p=ue(void 0),g=null,a=null,i=ue(null),o=ue(""),d=ue(!1),n=null,f=null,t=null,r=null,l=null,w=null,u=[];const m={30309:{lat:33.7847,lng:-84.3747,city:"Atlanta"},31419:{lat:32.0298,lng:-81.1165,city:"Savannah"},31210:{lat:32.8819,lng:-83.7102,city:"Macon"},30909:{lat:33.4404,lng:-82.0702,city:"Augusta"},31907:{lat:32.4754,lng:-84.9324,city:"Columbus"},30303:{lat:33.7545,lng:-84.3903,city:"Atlanta"},30318:{lat:33.7985,lng:-84.4255,city:"Atlanta"},30312:{lat:33.7384,lng:-84.3716,city:"Atlanta"},31401:{lat:32.0809,lng:-81.0912,city:"Savannah"},31405:{lat:32.0176,lng:-81.1287,city:"Savannah"}};qe(async()=>{a=(await ze(async()=>{const{default:c}=await import("../chunks/CjPBq9Bq.js").then(R=>R.l);return{default:c}},[],import.meta.url)).default;try{const[c,R,C,j,U,q]=await Promise.all([fetch("/data/representatives.json"),fetch("/data/points-of-contact.json"),fetch("/data/ga-congress.json"),fetch("/data/ga-state-senate.json"),fetch("/data/ga-state-house.json"),fetch("/data/ga-boundary.json")]);n=await c.json(),f=await R.json(),t=await C.json(),r=await j.json(),l=await U.json(),w=await q.json()}catch(c){console.error("Error loading data:",c)}b(p)&&(g=a.map(b(p)).setView([32.6781,-83.2238],7),a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(g))});function v(c){switch(c){case"sponsor":return"bg-green-900 text-green-100 border-green-600";case"supporter":return"bg-blue-900 text-blue-100 border-blue-600";case"target":return"bg-red-900 text-red-100 border-red-600";case"opposed":return"bg-neutral-800 text-neutral-400 border-neutral-600";default:return"bg-neutral-800 text-neutral-400 border-neutral-600"}}function _(c,R,C){const j=yt(c.name);return j?{...j,contactInfo:c,chamber:j.chamber,district:j.district}:{id:c.name.toLowerCase().replace(/ /g,"-"),name:c.name,chamber:R,district:C,party:c.party,stance:"undecided",roles:[],committees:[],contactInfo:c}}async function E(){if(!b(s)||b(s).length!==5){z(o,"Please enter a valid 5-digit ZIP code.");return}z(d,!0),z(o,""),z(i,null);try{let c=[],R,C,j="";try{const A=`https://nominatim.openstreetmap.org/search?postalcode=${b(s)}&country=US&state=Georgia&format=json&limit=1`;c=await(await fetch(A,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(A){console.warn("Primary geocoding failed:",A)}if(!c||c.length===0)try{const A=`https://nominatim.openstreetmap.org/search?q=${b(s)}+Georgia+USA&format=json&limit=1`;c=await(await fetch(A,{headers:{"User-Agent":"AbolitionGeorgia/1.0"}})).json()}catch(A){console.warn("Fallback geocoding failed:",A)}if(!c||c.length===0)if(m[b(s)]){const A=m[b(s)];R=A.lat,C=A.lng,j=A.city}else{z(o,"Could not find this ZIP code in Georgia. Please try again."),z(d,!1);return}else R=parseFloat(c[0].lat),C=parseFloat(c[0].lon),j=c[0].display_name.split(",")[0];const U=tt([C,R]),q=k(U,t),Z=k(U,r),ne=k(U,l);if(!q){z(o,"Could not determine congressional district for this ZIP code."),z(d,!1);return}const Re=n.us_congress[q],fe=Z?n.state_senate[Z]:null,V=ne?n.state_house[ne]:null,L=f[q]?.[0],J=[];if(Ge.forEach(A=>J.push({...A})),V){const A=_(V,"house",ne||"N/A");A.roles.unshift({title:"Your Representative",priority:0}),J.push(A)}if(fe){const A=_(fe,"senate",Z||"N/A");A.roles.unshift({title:"Your Senator",priority:0}),J.push(A)}z(i,{zipCode:b(s),city:j,lat:R,lng:C,usHouseDistrictId:q,stateSenateDistrictId:Z||"N/A",stateHouseDistrictId:ne||"N/A",targets:J,advocacyContact:L},!0),I(R,C,L)}catch(c){console.error("Search error:",c),z(o,"An error occurred while searching. Please try again.")}finally{z(d,!1)}}function k(c,R){if(!R||!R.features)return null;for(const C of R.features){const j=rt(C.geometry.coordinates);if(ft(c,j))return C.properties.district}return null}function I(c,R,C){if(!g||!a)return;u.forEach(q=>q.remove()),u=[];const j=a.divIcon({html:'<div style="background-color: #DC2626; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[16,16],iconAnchor:[8,8]}),U=a.marker([c,R],{icon:j}).bindPopup("<strong>Your Location</strong>").addTo(g);if(u.push(U),C){const q=a.divIcon({html:'<div style="background-color: #8B2635; width: 10px; height: 10px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',className:"",iconSize:[14,14],iconAnchor:[7,7]}),Z=a.marker([C.lat,C.lng],{icon:q}).bindPopup(`<strong>${C.name}</strong><br/>${C.type}`).addTo(g);u.push(Z)}g.flyTo([c,R],13)}function D(c){c.key==="Enter"&&E()}var G=At(),M=y(G),B=y(M),F=S(y(B),2),X=S(y(F),2),N=y(X);Ke(N);var T=S(N,2),Y=y(T,!0);x(T),x(X);var he=S(X,2);{var ge=c=>{var R=xt(),C=y(R,!0);x(R),re(()=>O(C,b(o))),te(c,R)};ve(he,c=>{b(o)&&c(ge)})}x(F);var be=S(F,2);{var Ne=c=>{var R=Ct(),C=y(R),j=y(C),U=S(y(j),2),q=y(U);x(U),x(j),x(C);var Z=S(C,2),ne=S(y(Z),2);Ae(ne,17,()=>b(i).targets,Pe,(V,L)=>{var J=Rt(),A=y(J),K=y(A),ie=y(K),le=y(ie);Ae(le,17,()=>b(L).roles,Pe,(W,de)=>{var ee=wt(),ye=y(ee,!0);x(ee),re(()=>O(ye,b(de).title)),te(W,ee)});var ce=S(le,2),Be=y(ce,!0);x(ce);var ke=S(ce,2),Fe=y(ke);x(ke),x(ie);var me=S(ie,2),Xe=y(me,!0);x(me),x(K);var He=S(K,2);{var Te=W=>{var de=_t(),ee=y(de),ye=S(y(ee));x(ee);var Ce=S(ee,2),Je=S(y(Ce));x(Ce),x(de),re(()=>{O(ye,` ${b(L).contactInfo.phone??""}`),O(Je,` ${b(L).contactInfo.email??""}`)}),te(W,de)};ve(He,W=>{b(L).contactInfo&&W(Te)})}Ze(2),x(A),x(J),re(W=>{Se(J,1,`bg-neutral-900 rounded border-l-4 ${b(L).stance==="sponsor"?"border-green-600":b(L).stance==="target"?"border-red-600":"border-neutral-600"} overflow-hidden shadow-lg`),O(Be,b(L).name),O(Fe,`${b(L).chamber==="house"?"State Representative":"State Senator"} â€¢ ${b(L).party??""}`),Se(me,1,`px-3 py-1 rounded-full text-xs font-bold border ${W??""} uppercase tracking-wider`),O(Xe,b(L).stance)},[()=>v(b(L).stance)]),te(V,J)}),x(Z);var Re=S(Z,2);{var fe=V=>{var L=kt(),J=S(y(L),2),A=y(J,!0);x(J);var K=S(J,2),ie=y(K,!0);x(K);var le=S(K,2),ce=y(le,!0);x(le),x(L),re(()=>{O(A,b(i).advocacyContact.name),O(ie,b(i).advocacyContact.type),O(ce,b(i).advocacyContact.address)}),te(V,L)};ve(Re,V=>{b(i).advocacyContact&&V(fe)})}x(R),re(()=>O(q,`${b(i).city??""}, GA ${b(i).zipCode??""}`)),te(c,R)};ve(be,c=>{b(i)&&c(Ne)})}x(B);var we=S(B,2),_e=y(we),$e=y(_e);et($e,c=>z(p,c),()=>b(p)),x(_e),x(we),x(M),x(G),re(()=>{T.disabled=b(d),O(Y,b(d)?"...":"Find")}),Ve("keypress",N,D),We(N,()=>b(s),c=>z(s,c)),Ye("click",T,E),te(e,G),Ue()}Qe(["click"]);export{Ft as component};
